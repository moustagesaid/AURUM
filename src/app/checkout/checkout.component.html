<div class="checkout-wrapper">
  <!-- Stepper -->
  <div class="checkout-stepper">
    <div class="step active">
      <div class="step-number">1</div>
      <div class="step-text">SHIPPING Details</div>
    </div>
    <div class="step-connector"></div>
    <div class="step">
      <div class="step-number">2</div>
      <div class="step-text">CONFIRM Order</div>
    </div>
  </div>

  <!-- Main Checkout Layout -->
  <div class="checkout-main">
    <!-- Left Column: Shipping Form -->
    <div class="checkout-left">
      <div class="shipping-section">
        <h2 class="section-title">Shipping Address</h2>

        <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="shipping-form">
          <!-- Name Fields -->
          <div class="form-row">
            <div class="form-group">
              <label for="firstName">First Name *</label>
              <input
                type="text"
                id="firstName"
                formControlName="firstName"
                class="form-input"
                [class.error]="checkoutForm.get('firstName')?.invalid && checkoutForm.get('firstName')?.touched">
              <div class="error-message" *ngIf="getFieldError('firstName')">
                {{ getFieldError('firstName') }}
              </div>
            </div>

            <div class="form-group">
              <label for="lastName">Last Name *</label>
              <input
                type="text"
                id="lastName"
                formControlName="lastName"
                class="form-input"
                [class.error]="checkoutForm.get('lastName')?.invalid && checkoutForm.get('lastName')?.touched">
              <div class="error-message" *ngIf="getFieldError('lastName')">
                {{ getFieldError('lastName') }}
              </div>
            </div>
          </div>

          <!-- Contact Info -->
          <div class="form-row">
            <div class="form-group">
              <label for="email">Email Address *</label>
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-input"
                [class.error]="checkoutForm.get('email')?.invalid && checkoutForm.get('email')?.touched">
              <div class="error-message" *ngIf="getFieldError('email')">
                {{ getFieldError('email') }}
              </div>
            </div>

            <div class="form-group">
              <label for="phone">Phone Number *</label>
              <input
                type="tel"
                id="phone"
                formControlName="phone"
                class="form-input"
                [class.error]="checkoutForm.get('phone')?.invalid && checkoutForm.get('phone')?.touched">
              <div class="error-message" *ngIf="getFieldError('phone')">
                {{ getFieldError('phone') }}
              </div>
            </div>
          </div>

          <!-- Address -->
          <div class="form-group">
            <label for="address">Street Address *</label>
            <input
              type="text"
              id="address"
              formControlName="address"
              class="form-input"
              placeholder="House number, street name"
              [class.error]="checkoutForm.get('address')?.invalid && checkoutForm.get('address')?.touched">
            <div class="error-message" *ngIf="getFieldError('address')">
              {{ getFieldError('address') }}
            </div>
          </div>

          <!-- City and Postal Code -->
          <div class="form-row">
            <div class="form-group">
              <label for="city">City *</label>
              <input
                type="text"
                id="city"
                formControlName="city"
                class="form-input"
                [class.error]="checkoutForm.get('city')?.invalid && checkoutForm.get('city')?.touched">
              <div class="error-message" *ngIf="getFieldError('city')">
                {{ getFieldError('city') }}
              </div>
            </div>

            <div class="form-group">
              <label for="postalCode">Postal Code *</label>
              <input
                type="text"
                id="postalCode"
                formControlName="postalCode"
                class="form-input"
                [class.error]="checkoutForm.get('postalCode')?.invalid && checkoutForm.get('postalCode')?.touched">
              <div class="error-message" *ngIf="getFieldError('postalCode')">
                {{ getFieldError('postalCode') }}
              </div>
            </div>
          </div>

          <!-- Country -->
          <div class="form-group">
            <label for="country">Country *</label>
            <div class="input-with-icon">
              <input
                type="text"
                id="country"
                formControlName="country"
                class="form-input readonly-country"
                readonly
                [class.error]="checkoutForm.get('country')?.invalid && checkoutForm.get('country')?.touched">
              <span class="input-icon">ðŸ”’</span>
            </div>
            <div class="error-message" *ngIf="getFieldError('country')">
              {{ getFieldError('country') }}
            </div>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="place-order-btn"
            [disabled]="checkoutForm.invalid">
            PLACE ORDER (COD)
          </button>
        </form>
      </div>
    </div>

    <!-- Right Column: Order Summary -->
    <div class="checkout-right">
      <div class="order-summary-card">
        <h3 class="summary-title">Order Summary</h3>

        <!-- Order Items -->
        <div class="order-items">
          <div class="order-item" *ngFor="let item of cartItems">
            <div class="item-image">
              <img [src]="item.image" [alt]="item.name" loading="lazy">
            </div>
            <div class="item-details">
              <h4 class="item-name">{{ item.name }}</h4>
              <p class="item-subtitle" *ngIf="item.subName">{{ item.subName }}</p>
              <div class="item-meta">
                <span class="item-size">{{ item.selectedSize }}</span>
                <span class="item-quantity">Qty: {{ item.quantity }}</span>
              </div>
            </div>
            <div class="item-price">
              ${{ (item.price * item.quantity).toFixed(2) }}
            </div>
          </div>
        </div>

        <!-- Order Totals -->
        <div class="order-totals">
          <div class="total-row">
            <span class="total-label">Items ({{ getTotalItems() }})</span>
            <span class="total-amount">${{ totalPrice.toFixed(2) }}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Shipping</span>
            <span class="total-amount">Free</span>
          </div>
          <div class="total-row total-final">
            <span class="total-label">Total</span>
            <span class="total-amount">${{ totalPrice.toFixed(2) }}</span>
          </div>
        </div>

        <!-- Payment Method -->
        <div class="payment-method">
          <h4 class="payment-title">Payment Method</h4>
          <div class="payment-info">
            <div class="payment-icon"><svg fill="#000000" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:serif="http://www.serif.com/" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g transform="matrix(1,0,0,1,-240,-384)"> <g transform="matrix(1.2,0,0,1,66.4,93)"> <path d="M168,300.472C168,300.162 167.94,299.855 167.824,299.578C167.441,298.659 166.521,296.452 165.961,295.106C165.678,294.428 165.101,294 164.47,294C161.728,294 154.272,294 151.53,294C150.899,294 150.322,294.428 150.039,295.106C149.479,296.452 148.559,298.659 148.176,299.578C148.06,299.855 148,300.162 148,300.472C148,302.843 148,313.511 148,318C148,318.53 148.176,319.039 148.488,319.414C148.801,319.789 149.225,320 149.667,320C153.433,320 162.567,320 166.333,320C166.775,320 167.199,319.789 167.512,319.414C167.824,319.039 168,318.53 168,318C168,313.511 168,302.843 168,300.472Z" style="fill:#032930;"></path> </g> <path d="M263.764,386L248.236,386C247.1,386 246.061,386.642 245.553,387.658L243.317,392.13C243.108,392.547 243,393.006 243,393.472C243,395.843 243,406.511 243,411C243,411.796 243.316,412.559 243.879,413.121C244.441,413.684 245.204,414 246,414C250.52,414 261.48,414 266,414C266.796,414 267.559,413.684 268.121,413.121C268.684,412.559 269,411.796 269,411L269,393.472C269,393.006 268.892,392.547 268.683,392.131L266.447,387.658C265.939,386.642 264.9,386 263.764,386ZM267,394L260,394L260,397.955C260,398.719 259.565,399.416 258.879,399.752C258.193,400.088 257.375,400.003 256.772,399.534L256,398.934L255.228,399.534C254.625,400.003 253.807,400.088 253.121,399.752C252.435,399.416 252,398.719 252,397.955L252,394L245,394L245,411C245,411.265 245.105,411.52 245.293,411.707C245.48,411.895 245.735,412 246,412L266,412C266.265,412 266.52,411.895 266.707,411.707C266.895,411.52 267,411.265 267,411C267,411 267,394 267,394ZM249.886,407.998C248.283,407.938 247,406.618 247,405C247,403.344 248.344,402 250,402L251,402C251.552,402 252,402.448 252,403C252,403.552 251.552,404 251,404C251,404 250,404 250,404C249.448,404 249,404.448 249,405C249,405.552 249.448,406 250,406L250.888,406C251.44,406 251.888,406.448 251.888,407C251.888,407.535 251.468,407.972 250.94,407.999L249.888,408L249.886,407.998ZM260,407C260,407.552 260.448,408 261,408L262,408C263.656,408 265,406.656 265,405C265,403.344 263.656,402 262,402L261,402C260.448,402 260,402.448 260,403L260,407ZM256,402C254.344,402 253,403.344 253,405C253,406.656 254.344,408 256,408C257.656,408 259,406.656 259,405C259,403.344 257.656,402 256,402ZM262,406C262.552,406 263,405.552 263,405C263,404.448 262.552,404 262,404L262,406ZM256,404C256.552,404 257,404.448 257,405C257,405.552 256.552,406 256,406C255.448,406 255,405.552 255,405C255,404.448 255.448,404 256,404ZM258,394L258,397.955C257.29,397.403 256.614,396.877 256.614,396.877C256.253,396.596 255.747,396.596 255.386,396.877L254,397.955L254,394L258,394ZM252.82,388L252.153,392L245.618,392L247.342,388.553C247.511,388.214 247.857,388 248.236,388L252.82,388ZM254.18,392L254.847,388L257.153,388L257.82,392L254.18,392ZM259.18,388L263.764,388C264.143,388 264.489,388.214 264.658,388.553L266.382,392L259.847,392L259.18,388Z" style="fill:#f3c212;"></path> </g> </g></svg></div>
            <div class="payment-details">
              <div class="payment-type">Cash on Delivery</div>
              <div class="payment-desc">Pay when you receive your order</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>